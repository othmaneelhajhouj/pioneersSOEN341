<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<title>Events</title>
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<%- include('../partials/nav', { active: 'events', injectStyles: true }) %>
</head>
<body>
<%- include('../partials/hero', { title: 'Upcoming Events', subtitle: 'Claim tickets & stay engaged.' }) %>
<main class="container pb-5">
	<div class="row g-4">
		<% (events || []).forEach(ev => { %>
			<div class="col-12 col-sm-6 col-lg-4">
				<div class="card h-100">
					<div class="card-body d-flex flex-column">
						<h5 class="card-title mb-2"><%= ev.title %></h5>
						<div class="small text-secondary mb-2"><i class="fa fa-calendar me-1"></i><%= ev.startDateShort || '' %></div>
						<p class="card-text small flex-grow-1"><%= (ev.description || '').slice(0,140) %>...</p>
						<div class="d-flex justify-content-between align-items-center mt-2">
							<a href="/events/<%= ev.id %>" class="btn btn-outline-light btn-sm">Details</a>
							<form action="/tickets" method="POST">
								<input type="hidden" name="eventId" value="<%= ev.id %>">
								<button class="btn btn-primary btn-sm" type="submit">Claim</button>
							</form>
						</div>
					</div>
				</div>
			</div>
		<% }) %>
		<% if(!events || !events.length){ %>
			<div class="col-12">
				<div class="alert alert-secondary">No events yet.</div>
			</div>
		<% } %>
	</div>
</main>
<%- include('../partials/footer') %>
</body>
</html>
